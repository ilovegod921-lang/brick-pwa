<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>PWA 打磚塊</title>

  <style>
    canvas {
      background: #000;
      display: block;
      margin: 0 auto;
    }
  </style>

  <link rel="manifest" href="manifest.json">
</head>

<body>
  <canvas id="gameCanvas" width="480" height="320"></canvas>

  <script>
    // ======== 遊戲基本設定 ========
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    let gameOver = false;   // ⭐ 修正 Game Over 無限跳視窗

    let x = canvas.width / 2;
    let y = canvas.height - 30;
    let dx = 2;
    let dy = -2;

    const ballRadius = 10;

    const paddleHeight = 10;
    const paddleWidth = 75;
    let paddleX = (canvas.width - paddleWidth) / 2;

    let rightPressed = false;
    let leftPressed = false;

    // ======== 磚塊設定 ========
    const brickRowCount = 5;
    const brickColumnCount = 7;
    const brickWidth = 55;
    const brickHeight = 20;
    const brickPadding = 10;
    const brickOffsetTop = 30;
    const brickOffsetLeft = 30;

    let bricks = [];
    for (let c = 0; c < brickColumnCount; c++) {
      bricks[c] = [];
      for (let r = 0; r < brickRowCount; r++) {
        bricks[c][r] = { x: 0, y: 0, status: 1 };
      }
    }

    // ======== 控制鍵盤 ========
    document.addEventListener("keydown", keyDownHandler);
    document.addEventListener("keyup", keyUpHandler);

    function keyDownHandler(e) {
      if (e.key === "Right" || e.key === "ArrowRight") rightPressed = true;
      else if (e.key === "Left" || e.key === "ArrowLeft") leftPressed = true;
    }

    function keyUpHandler(e) {
      if (e.key === "Right" || e.key === "ArrowRight") rightPressed = false;
      else if (e.key === "Left" || e.key ===
